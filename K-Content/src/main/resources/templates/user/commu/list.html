<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="ko">
<head>
<link rel="stylesheet" href="/css/commu/commuList.css">
<link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/body-header.css">
<link rel="stylesheet" href="/css/commu-nav.css">
<meta charset="UTF-8">
</head>
<body>
	<th:block th:replace="~{/include/header :: header}"></th:block>
	<div th:replace="~{/include/body-header :: header }"></div>

	<div class="container">
		<div th:replace="~{/include/community-center :: commu-nav}" class="mb-5"></div>
		
		<div class="commuDropdown">
			<button class="dropbtn position-relative">
				카테고리
				<span class="position-absolute end-0 pe-3"><i class="fa-solid fa-angle-down"></i></span>
			</button>
			<div class="dropdown-content">
				<div th:each= "cate : ${cateList}"  class="cate mx-3" th:data-maincate-value="${cate}">[[${cate}]]</div>
			</div>
		</div>
		
		<table class="table table-hover text-center table-group-divider">
			<thead>
				<tr>
					<th scope="col">번호</th>
					<th scope="col">카테고리</th>
					<th scope="col">제목</th>
					<th scope="col">작성자</th>
					<th scope="col">조회</th>
					<th scope="col">작성일</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="commu : ${commulist}" class="commu-row"
					th:attr="data-commu-id=${commu.commuId}">

					<td th:text="${commu.commuId}"></td>
					<td><span th:each="code : ${commuCateCodeList}"
						th:if="${code.commonCode} eq ${commu.commuCateCode}"
						th:text="${code.commonCodeVal}" style="font-weight: bold">카테고리명</span>

					</td>


					<td><a th:href="@{/commu/detail/{id}(id=${commu.commuId})}"
						th:text="${commu.commuTitle}"></a></td>
					<td th:text="${commu.commuMberId}"></td>
					<td th:text="${commu.commuReadCnt}"></td>
					<td th:text="${commu.commuRegistDate}"></td>
				</tr>
			</tbody>
		</table>
		<a sec:authorize="isAuthenticated()" class="btn commuBtn"
			th:href="@{/commu/write}">글쓰기</a>
		<nav aria-label="Page navigation"
			class="d-flex justify-content-center">
			<ul class="pagination">
				<!-- 페이지 목록 출력 -->
				<li class="page-item" th:if="${nowPageBlock>1}"><a
					class="page-link prepage" aria-label="Previous"> <span
						aria-hidden="true">&laquo;</span>
				</a></li>

				<li class="page-item"
					th:each="i: ${#numbers.sequence(startPage, endPage)}"
					th:classappend="${i==nowPage}?active"><a
					class="page-link selpage" th:data-selpage="${i}">[[${i}]]</a></li>

				<li class="page-item" th:if="${nowPageBlock<totalPageBlock}"><a
					class="page-link nextpage" aria-label="Next"> <span
						aria-hidden="true">&raquo;</span>
				</a></li>
			</ul>
		</nav>
	</div>
	<footer th:insert="~{/include/body-footer :: userFooter}"></footer>
</body>
<script th:src="@{/js/commu/commulist.js}"></script>
</html>