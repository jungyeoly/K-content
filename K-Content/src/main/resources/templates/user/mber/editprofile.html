<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="ko">
<head>
<th:block th:replace="~{/include/header :: header}"></th:block>

</head>

<body>
	<header th:insert="~{/include/body-header :: userNavBar}"></header>
	<div class="container">
		<div class="menu fw-bold">마이페이지</div>
		<div
			class="border-bottom border-top border-2 fw-bold border-dark mb-3">
			<div class="mt-3 mb-3 row">
				<label for="mber_auth" class="col-sm-2 col-form-label">계정 구분</label>
				<div class="col-md-4">
					<input type="text" readonly class="form-control-plaintext"
						id="mber_auth" th:value="${isAdmin ? '관리자' : '회원'}" tabindex="-1">
				</div>
			</div>
				<div class="mb-3 row">
					<label for="mber_id" class="col-sm-2 col-form-label">아이디</label>
					<div class="col-md-4">
						<input type="text" readonly class="form-control-plaintext"
							id="mber_id" th:value="${mber.mberId}"
							tabindex="-1" required>
					</div>
				</div>
				<form th:action="@{/mber/update}" method="post"
				class="validation-form" id="mberInfoForm" novalidate>
				<div class="mb-3 row">
					<label for="mber_pwd" class="col-sm-2 col-form-label">비밀번호</label>
					<div class="col-md-4">
						<input type="password" class="form-control" id="mber_pwd" name="mberPwd"
							placeholder="비밀번호 입력"
							pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,16}$"
							required>
					</div>
					<div class="col-md-2">
						<i class="fa fa-eye" id=see_pwd></i>
					</div>
				</div>
				<div class="mb-3 row">
					<label for="mber_name" class="col-sm-2 col-form-label">이름</label>
					<div class="col-md-4">
						<input type="text" class="form-control" id="mber_name" name="mberName"
							th:value="${mber.mberName}">
					</div>

				</div>
				<div class="mb-3 row">
					<label for="mber_email" class="col-sm-2 col-form-label">이메일</label>
					<div class="col-md-4">
						<input type="text" class="form-control" id="mber_email" name="mberEmail"
							th:value="${mber.mberEmail}" required>
					</div>

				</div>
				<div class="mb-3 row">
					<label for="mber_gender" class="col-sm-2 col-form-label">성별</label>
					<div class="col-md-4">
						<select name="mberGenderCode" class="form-select" id="mber_gender" required>
							<option value="" disabled>성별 선택</option>
							<option value="C0101" th:selected="${mber.mberGenderCode} == 'C0101'">남자</option>
							<option value="C0102" th:selected="${mber.mberGenderCode} == 'C0102'">여자</option>
							<option value="C0103" th:selected="${mber.mberGenderCode} == 'C0103'">비공개</option>
						</select>
					</div>
				</div>
				<div class="mb-3 row">
					<label for="mber_birth" class="col-sm-2 col-form-label">생년월일</label>
					<div class="col-md-4">
						<input type="text" class="form-control-plaintext" id="mber_birth"
							th:value="${mber.mberBirth}" tabindex="-1" name="mberBirth" required>
					</div>
				</div>
				<div class="mb-3 row">
					<label for="mber_phone" class="col-sm-2 col-form-label">전화번호</label>
					<div class="col-md-4">
						<input type="text" class="form-control"
							th:value="${mber.mberPhone}" id="mber_phone" name="mberPhone" oninput="oninputPhone(this)" maxlength="14" required>
					</div>
				</div>
			</form>
			<div class="mb-3 row">
				<label for="mber_regist_date" class="col-sm-2 col-form-label">가입일자</label>
				<div class="col-md-4">
					<input type="text" readonly class="form-control-plaintext"
						id="mber_regist_date"
						th:value="${mber.mberRegistDate}"
						tabindex="-1" required>
				</div>

			</div>

		</div>

		<div class="mb-3 row">
			<div class="col-md-2">
				<button type="submit" tabindex="-1" class="btn form-control" form="mberInfoForm"
					id="edit-btn">
					<span id="fw-bold">수정완료</span>
					<div class="spinner-border text-info spinner-border-sm ms-2 d-none"
						role="status" id="mail-check-spinner"></div>
				</button>
			</div>
			<div class="col-md-2">
				<a th:href="@{/mber/mypage}"><button type="button" tabindex="-1" class="bgwhite_btn btn form-control">
					<span id="fw-bold">취소</span>
				</button></a>
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function() {
			$('#see_pwd').on('click', function() {
				var passwordInput = $('#mber_pwd');
				var eyeIcon = $(this);

				if (passwordInput.attr('type') === 'password') {
					passwordInput.attr('type', 'text');
					eyeIcon.attr('class', 'fa fa-eye-slash');
				} else {
					passwordInput.attr('type', 'password');
					eyeIcon.attr('class', 'fa fa-eye');
				}
			});
		});
		
		function oninputPhone(target) {
		    target.value = target.value
		        .replace(/[^0-9]/g, '')
		        .replace(/(^02.{0}|^01.{1}|[0-9]{3,4})([0-9]{3,4})([0-9]{4})/g, "$1-$2-$3");
		}
	</script>
</body>
</html>